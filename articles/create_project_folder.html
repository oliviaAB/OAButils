<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="OAButils">
<title>Template Data Science project directory • OAButils</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Template Data Science project directory">
<meta property="og:description" content="OAButils">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">OAButils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/create_project_folder.html">Template Data Science project directory</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/oliviaAB/OAButils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="create_project_folder_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Template Data Science project directory</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/oliviaAB/OAButils/blob/HEAD/vignettes/create_project_folder.Rmd" class="external-link"><code>vignettes/create_project_folder.Rmd</code></a></small>
      <div class="d-none name"><code>create_project_folder.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://oliviaab.github.io/OAButils/">OAButils</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="rationale">Rationale<a class="anchor" aria-label="anchor" href="#rationale"></a>
</h2>
<p>The goal of this function is to provide an easy way to set up a directory for a new Data Science project. This allows to have a consistent set-up between different projects, while avoiding the need to copy-paste a template file for every new project.</p>
<p>The template set-up created answers the following needs:</p>
<ul>
<li>Use of the <code>targets</code> package, to create a reproducible analysis pipeline.</li>
<li>Benefit from all the advantages RMarkdown documents offer, through literate programming.</li>
<li>Automatically update reports and presentations when the analysis is changed.</li>
</ul>
</div>
<div class="section level2">
<h2 id="how-to-use-the-function">How to use the function<a class="anchor" aria-label="anchor" href="#how-to-use-the-function"></a>
</h2>
<p>We assume that:</p>
<ul>
<li>The folder is the top level of a RStudio project;</li>
<li>The folder will be version-controlled through git;</li>
<li>The <code>renv</code> package will be used for this project.</li>
</ul>
</div>
<div class="section level2">
<h2 id="the-template-directory">The template directory<a class="anchor" aria-label="anchor" href="#the-template-directory"></a>
</h2>
<p>The function creates three folders:</p>
<div class="section level3">
<h3 id="the-folders">The folders<a class="anchor" aria-label="anchor" href="#the-folders"></a>
</h3>
<div class="section level4">
<h4 id="data-folder">
<code>data/</code> folder<a class="anchor" aria-label="anchor" href="#data-folder"></a>
</h4>
<p>This is where the raw data should go. It is preferable that raw data is stored in a separate folder, so that there is less chance to accidentally mess up with the data during the analysis. This folder should only be used when reading in the raw data, and should not be used to store any output from the pipeline, even cleaned up versions of the datasets (these should go into the <code>output/</code> folder).</p>
</div>
<div class="section level4">
<h4 id="output-folder">
<code>output/</code> folder<a class="anchor" aria-label="anchor" href="#output-folder"></a>
</h4>
<p>This folder should be used to store any output from the analysis pipeline, from clean version of the data, graphs, to rendered reports. This makes it easy for any collaborator to access the output from the analysis, rather than having to look through different folders. In addition, if the folder is deleted, everything should be reproduced by running the analysis pipeline.</p>
</div>
<div class="section level4">
<h4 id="reports-folder">
<code>reports/</code> folder<a class="anchor" aria-label="anchor" href="#reports-folder"></a>
</h4>
<p>The <code>reports/</code> folder is for storing the different RMarkdown documents that will be used to generate reports, presentations, etc. It is useful to have them in a separate folder to avoid cluttering the main directory. It is recommended that the rendered versions of the reports be saved in the <code>output/</code> folder rather than in this folder.</p>
</div>
</div>
<div class="section level3">
<h3 id="the-master-file">The master file<a class="anchor" aria-label="anchor" href="#the-master-file"></a>
</h3>
<p>The philosophy of this template is to use <code>targets</code> to build a reproducible pipeline. However, there is also a need to produce well-documented analyses for sharing with collaborators, or simply for future reference. The Rmarkdown approach, which interlaces code and text, is uniquely suited for that. Therefore, the template makes use of <a href="https://books.ropensci.org/targets/markdown.html#target-markdown" class="external-link">literate programming</a> to generate the targets file. The master file in the folder, <code>make_targets_pipeline.Rmd</code>, is a Target Markdown file. It is a Rmarkdown file, but the chunks use the <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> language engine. A targets chunk is used to define one of more targets. When executed interactively in RStudio, the target code will be executed and its result saved in the current environment under an object with the target’s name. When the document is knitted (or run in the non-interactive mode), instead the target definition is saved in a R file in a separate folder. A <code>_targets.R</code> file is created, such tath when <code>tar_make()</code> is called, all R files in this separate folder are iterated through and evaluated, thus creating the pipeline defined by the targets chunk. This option is ideal when building an analysis, as it allows the data scientist to document its code, while enjoying all the benefits of a reproducible pipeline that <code>targets</code> offers. The advantage of this approach is that the rendered document is effectively a technical report, as it shows in a single document the code used for the analysis pipeline as well as any explanation of the different steps.</p>
<div class="section level4">
<h4 id="the-yaml-header">The YAML header<a class="anchor" aria-label="anchor" href="#the-yaml-header"></a>
</h4>
<p>The Target Markdown file starts with the following header:</p>
<pre><code>---
title: 'Data Science Technical Report template'
author: 'Olivia Angelin-Bonnet'
date: 'Last edited: May 25, 2022'
output: 
  github_document:
    toc: true
---</code></pre>
<p>The default output format is a <code>.md</code> file, which is very convenient as it is readable directly in GitHub. The date is automatically set to the current day, which is useful to see when it was last updated.</p>
<p>The first code chunk is the usual set-up chunk, which sets the global <code>knitr</code> chunk options. In particular, the <code>results</code> options is set to <code>"hide"</code>. This is because, when rendered, the output of a <code>targets</code> chunk is not really informative, so hiding it gives a cleaner report. In this first setup chunk, the <code>targets</code> package is also loaded, and removes the previous instance of the … through a call to <code>tar_unscript()</code>. This ensures that any target that was removed in the Target Markdown will not be present in the pipeline.</p>
</div>
<div class="section level4">
<h4 id="setting-globals-for-the-target-pipeline">Setting globals for the target pipeline<a class="anchor" aria-label="anchor" href="#setting-globals-for-the-target-pipeline"></a>
</h4>
<p>The next code chunk defines the globals of the targets pipeline, i.e. any code that would be present at the top of the <code>_targets.R</code> file, before defining the list of targets. This is the first <code>targets</code> chunk, and the option <code>tar_globals</code> is set to <code>TRUE</code> to indicate that we are not defining a new target, but rather code that must be executed before running the pipeline.</p>
<pre><code>```{targets set-globals, tar_globals = TRUE}
library(tarchetypes)
library(here)

## Turning off starting tidyverse message
options(tidyverse.quiet = TRUE)

## Making sure renv lock file is up-to-date
renv::snapshot()

## Packages used in the pipeline
tar_option_set(packages = c("here",
                            "rmarkdown",
                            "readr", 
                            "dplyr",
                            "tidyr",
                            "stringr",
                            "ggplot2"))

## Setting global options for ggplot
ggplot2::theme_set(ggplot2::theme_bw())
ggplot2::theme_update(plot.title = ggplot2::element_text(hjust = 0.5))
ggplot2::theme_update(legend.position = "bottom")
```</code></pre>
<p>After loading the <code>targets</code> and <code>tarchetypes</code> packages (the latter necessary for rendering Rmarkdown documents in the targets pipeline), and suppressing the tidyverse startup message, the pipeline will make a call to <code><a href="https://rstudio.github.io/renv/reference/snapshot.html" class="external-link">renv::snapshot()</a></code>. This ensures that we get an accurate representation of the packages dependencies at the time of running the pipeline. Then, the different packages to be used in the pipeline are listed, and some global options are set for all <code>ggplot2</code> graphs that will be generated by the pipeline.</p>
</div>
<div class="section level4">
<h4 id="listing-helper-functions">Listing helper functions<a class="anchor" aria-label="anchor" href="#listing-helper-functions"></a>
</h4>
<p>In a classic <code>targets</code> pipeline, it is recommended to save any custom functions created in files stored in the <code>R/</code> folder, and then source these files at the top of the <code>_targets.R</code> file. This the rendered version of this Target Markdown acts as a technical report, it is useful to display here the code of these functions. This is the use of the ‘Helper functions’ section in the Target Markdown. Again, the target chunks in this sections define globals for the pipeline (through <code>tar_globals = TRUE</code>). It is recommended to have one chunk per function. For example, to define a <code>create_plot</code> function, the following chunk is used (notice how the name of each targets chunk must be unique):</p>
<pre><code>```{targets globals-create_plot, tar_globals = TRUE}
create_plot &lt;- function(data) {
  ggplot(data) +
    geom_histogram(aes(x = Ozone), bins = 12)+
    labs(x = "coucou")
}
```</code></pre>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Olivia Angelin-Bonnet.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
